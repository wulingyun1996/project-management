webpackJsonp([60],{"04yi":function(t,e){},ALJL:function(t,e){},JEQS:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("/kga"),s=(n.a,Boolean,Boolean,String,String,Boolean,String,String,String,String,Number,String,String,String,Boolean,Object,Boolean,String,Boolean,Boolean,{name:"confirm",components:{XDialog:n.a},props:{value:{type:Boolean,default:!1},showInput:{type:Boolean,default:!1},placeholder:{type:String,default:""},theme:{type:String,default:"ios"},hideOnBlur:{type:Boolean,default:!1},title:String,confirmText:String,cancelText:String,maskTransition:{type:String,default:"vux-fade"},maskZIndex:[Number,String],dialogTransition:{type:String,default:"vux-dialog"},content:String,closeOnConfirm:{type:Boolean,default:!0},inputAttrs:Object,showContent:{type:Boolean,default:!0},confirmType:{type:String,default:"primary"},showCancelButton:{type:Boolean,default:!0},showConfirmButton:{type:Boolean,default:!0}},created:function(){this.showValue=this.show,this.value&&(this.showValue=this.value)},watch:{value:function(t){this.showValue=t},showValue:function(t){var e=this;this.$emit("input",t),t&&(this.showInput&&(this.msg="",setTimeout(function(){e.$refs.input&&e.setInputFocus()},300)),this.$emit("on-show"))}},data:function(){return{msg:"",showValue:!1}},methods:{getInputAttrs:function(){return this.inputAttrs||{type:"text"}},setInputValue:function(t){this.msg=t},setInputFocus:function(t){t&&t.preventDefault(),this.$refs.input.focus()},_onConfirm:function(){this.showValue&&(this.closeOnConfirm&&(this.showValue=!1),this.$emit("on-confirm",this.msg))},_onCancel:function(){this.showValue&&(this.showValue=!1,this.$emit("on-cancel"))}}}),o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vux-confirm"},[i("x-dialog",{attrs:{"dialog-class":"android"===t.theme?"weui-dialog weui-skin_android":"weui-dialog","mask-transition":t.maskTransition,"dialog-transition":"android"===t.theme?"vux-fade":t.dialogTransition,"hide-on-blur":t.hideOnBlur,"mask-z-index":t.maskZIndex},on:{"on-hide":function(e){t.$emit("on-hide")}},model:{value:t.showValue,callback:function(e){t.showValue=e},expression:"showValue"}},[t.title?i("div",{staticClass:"weui-dialog__hd",class:{"with-no-content":!t.showContent}},[i("strong",{staticClass:"weui-dialog__title"},[t._v(t._s(t.title))])]):t._e(),t._v(" "),t.showContent?[t.showInput?i("div",{staticClass:"vux-prompt"},["checkbox"===t.getInputAttrs().type?i("input",t._b({directives:[{name:"model",rawName:"v-model",value:t.msg,expression:"msg"}],ref:"input",staticClass:"vux-prompt-msgbox",attrs:{placeholder:t.placeholder,type:"checkbox"},domProps:{checked:Array.isArray(t.msg)?t._i(t.msg,null)>-1:t.msg},on:{touchend:t.setInputFocus,change:function(e){var i=t.msg,n=e.target,s=!!n.checked;if(Array.isArray(i)){var o=t._i(i,null);n.checked?o<0&&(t.msg=i.concat([null])):o>-1&&(t.msg=i.slice(0,o).concat(i.slice(o+1)))}else t.msg=s}}},"input",t.getInputAttrs(),!1)):"radio"===t.getInputAttrs().type?i("input",t._b({directives:[{name:"model",rawName:"v-model",value:t.msg,expression:"msg"}],ref:"input",staticClass:"vux-prompt-msgbox",attrs:{placeholder:t.placeholder,type:"radio"},domProps:{checked:t._q(t.msg,null)},on:{touchend:t.setInputFocus,change:function(e){t.msg=null}}},"input",t.getInputAttrs(),!1)):i("input",t._b({directives:[{name:"model",rawName:"v-model",value:t.msg,expression:"msg"}],ref:"input",staticClass:"vux-prompt-msgbox",attrs:{placeholder:t.placeholder,type:t.getInputAttrs().type},domProps:{value:t.msg},on:{touchend:t.setInputFocus,input:function(e){e.target.composing||(t.msg=e.target.value)}}},"input",t.getInputAttrs(),!1))]):i("div",{staticClass:"weui-dialog__bd"},[t._t("default",[i("div",{domProps:{innerHTML:t._s(t.content)}})])],2)]:t._e(),t._v(" "),i("div",{staticClass:"weui-dialog__ft"},[t.showCancelButton?i("a",{staticClass:"weui-dialog__btn weui-dialog__btn_default",attrs:{href:"javascript:;"},on:{click:t._onCancel}},[t._v(t._s(t.cancelText||"取消"))]):t._e(),t._v(" "),t.showConfirmButton?i("a",{staticClass:"weui-dialog__btn",class:"weui-dialog__btn_"+t.confirmType,attrs:{href:"javascript:;"},on:{click:t._onConfirm}},[t._v(t._s(t.confirmText||"确定"))]):t._e()])],2)],1)},staticRenderFns:[]};var a=i("VU/8")(s,o,!1,function(t){i("04yi")},null,null).exports,l=i("63CM"),r=i("DHfu"),u=(l.a,{data:function(){return{id:this.$route.query.id,oldUserName:this.$route.query.userName,oldMobile:this.$route.query.mobile,signInfo:{userName:this.$route.query.userName,mobile:this.$route.query.mobile||window.sessionStorage.getItem("account")},signUpId:this.$route.query.signUpId,showDialog:!1,isLeave:!0,canSubmit:!0}},created:function(){Object(r.n)("请填写报名信息"),window.closeMyView=this.closeMyView,window.confirmBack=this.confirmBack},methods:{submitSignInfo:function(){var t=this;if(this.isDisable)return!1;return this.signInfo.userName?/\s+/g.test(this.signInfo.userName)?(this.$t("姓名不允许出现空格","middle"),!1):/^1[3-9][0-9]{9}$/.test(this.signInfo.mobile)?!!this.canSubmit&&(this.canSubmit=!1,void(this.signUpId?this.$http("activity/modify",{id:this.id,old_name:this.oldUserName,old_mobile:this.oldMobile,new_name:this.signInfo.userName,new_mobile:this.signInfo.mobile,sign_up_id:this.signUpId}).then(function(e){t.canSubmit=!0,200===e.code?t.$router.push({path:"/signupPay",query:{id:t.id,mobile:t.signInfo.mobile}}):t.$t(e.message,"middle")}):this.$http("activity/signUp",{id:this.id,mobile:this.signInfo.mobile,name:this.signInfo.userName}).then(function(e){(t.canSubmit=!0,e.code===t.$ok)?e.data.is_pay?t.$router.replace({path:"/signupPay",query:{id:t.id,mobile:t.signInfo.mobile}}):(t.$t("恭喜您，报名成功","middle"),setTimeout(function(){t.$router.replace({path:"/signupSucc",query:{id:t.id,mobile:t.signInfo.mobile,userName:t.signInfo.userName}})},2e3)):t.$t(e.message,"middle")}).catch(function(e){t.canSubmit=!0,t.$t(e,"middle")}))):(this.$t("请输入正确的手机号","middle"),!1):(this.$t("姓名不能为空","middle"),!1)},handleInput:function(){this.$refs.nameInput.value&&this.$refs.phoneInput.value?this.isDisable=!1:this.isDisable=!0},onShowDialog:function(){this.isLeave=!1},confirmBack:function(){this.showDialog=!0},closeMyView:function(){Object(r.c)()},onConfirm:function(){this.isLeave=!0,this.$router.back(-1)},onCancelDialog:function(){this.isLeave=!0}},computed:{isDisable:function(){return!this.signInfo.userName||!this.signInfo.mobile}},directives:{TransferDom:l.a},components:{Confirm:a},beforeRouteLeave:function(t,e,i){this.isLeave?i():i(!1)}}),c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"sign-info"},[i("div",{staticClass:"sign-form"},[i("div",{staticClass:"sign-form-item"},[i("span",[t._v("姓名")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.signInfo.userName,expression:"signInfo.userName"}],ref:"nameInput",attrs:{type:"text",placeholder:"请输入您的姓名"},domProps:{value:t.signInfo.userName},on:{input:function(e){e.target.composing||t.$set(t.signInfo,"userName",e.target.value)}}})]),t._v(" "),i("div",{staticClass:"sign-form-item"},[i("span",[t._v("手机号")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.signInfo.mobile,expression:"signInfo.mobile"}],ref:"phoneInput",attrs:{type:"number",placeholder:"请输入您的手机号"},domProps:{value:t.signInfo.mobile},on:{input:function(e){e.target.composing||t.$set(t.signInfo,"mobile",e.target.value)}}})])]),t._v(" "),i("div",{staticClass:"btn-submit ipone-x-absolute-bottom1",class:{disabled:t.isDisable},on:{click:t.submitSignInfo}},[t._v("提交")]),t._v(" "),i("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}],staticClass:"tips-save-dialog"},[i("confirm",{attrs:{title:"放弃活动报名"},on:{"on-confirm":t.onConfirm,"on-show":t.onShowDialog,"on-cancel":t.onCancelDialog},model:{value:t.showDialog,callback:function(e){t.showDialog=e},expression:"showDialog"}},[i("p",{staticStyle:{"text-align":"center"}},[t._v("您确认放弃该活动的报名吗？")])])],1)])},staticRenderFns:[]};var m=i("VU/8")(u,c,!1,function(t){i("ALJL")},null,null);e.default=m.exports}});