webpackJsonp([5],{"3W7U":function(s,a,e){"use strict";String,Number;var t={props:{ratio:{type:[String,Number],default:0}},computed:{show1:function(){return this.ratio>=0&&this.ratio<80},show2:function(){return this.ratio>=80&&this.ratio<100},show3:function(){return 100===this.ratio}}},i={render:function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("div",{staticClass:"progress-container"},[e("div",{staticClass:"kill-progress"},[e("div",{staticClass:"skill-pro-bg"},[e("p",{staticClass:"skill-iteam-progress",class:{no:s.show3}},[e("span",{staticClass:"skill-pro-insetbg"},[e("span",{staticClass:"skill-iteam-pro",class:{no:s.show3},style:{width:s.ratio+"%"}}),s._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:s.show1,expression:"show1"}],staticClass:"prompt-info"},[s._v(s._s(s.ratio)+"%")]),s._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:s.show2,expression:"show2"}],staticClass:"prompt-info"},[s._v("即将售罄")]),s._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:s.show3,expression:"show3"}],staticClass:"prompt-info"},[s._v("已售罄")])])])])])])},staticRenderFns:[]};var r=e("VU/8")(t,i,!1,function(s){e("f8hi")},null,null);a.a=r.exports},GErS:function(s,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t=e("mvHQ"),i=e.n(t),r=e("//Fk"),n=e.n(r),o=e("Xxa5"),c=e.n(o),l=e("Gu7T"),h=e.n(l),d=e("exGp"),u=e.n(d),v=e("Dd8w"),m=e.n(v),p=e("CpqM"),f=e("bh5B"),_=e("3W7U"),w=e("i3Gc"),g=e("msXN"),b=e("X2Oc"),C=e("DHfu"),T=e("NYxO"),S=(g.b,g.c,m()({},Object(T.e)(["showUnreadMessage"]),{isShare:function(){return!!this.$route.query.isShare},shareId:function(){return this.$route.query.shareId}}),f.a,_.a,w.a,p.a,function(s,a){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"money";return s.forEach(function(s){s[e]=Object(b.q)(s[a])}),s}),I={name:"CgsFlashSale",mixins:[g.b,g.c],data:function(){return{waitFlag:!1,isNone:!1,banner:{},countTime:{},flashStartTime:0,flashEndTimes:0,flashTimeId:null}},computed:m()({},Object(T.e)(["showUnreadMessage"]),{isShare:function(){return!!this.$route.query.isShare},shareId:function(){return this.$route.query.shareId}}),created:function(){this.getData()},methods:{getData:function(){var s=this;return u()(c.a.mark(function a(){var e,t;return c.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(s.m_hasMore){a.next=2;break}return a.abrupt("return");case 2:return e="adv/getFlashSale",t={page:++s.m_page,shareId:s.shareId},s.isShare||delete t.shareId,1===s.m_page&&(s.waitFlag=!1,s.flashTimeId&&clearInterval(s.flashTimeId)),a.next=8,s.$http(e,t).then(function(a){a.code===s.$ok&&(s.banner=a.data.item,S(a.data.goods.data,"price","priceItem"),s.flashEndTimes=Object(b.h)(a.data.item.end_at),s.getServerTime().then(function(e){s.flashCountDownTime(e),s.m_dataList=[].concat(h()(s.m_dataList),h()(a.data.goods.data)),s._checkMore(a.data.goods),s.waitFlag=!0}))});case 8:case"end":return a.stop()}},a,s)}))()},flashCountDownTime:function(s){var a=this;this.flashStartTime=s-0,this.countTime=Object(b.b)(this.flashStartTime,this.flashEndTimes),this.flashTimeId=setInterval(function(){0===a.flashEndTimes-a.flashStartTime&&clearInterval(a.flashTimeId),a.countTime=Object(b.b)(a.flashStartTime,a.flashEndTimes),a.flashStartTime++},1e3)},statisticsData:function(s,a){var e=this;return u()(c.a.mark(function t(){var i,r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i="shareRecord",r={type:18,goodsId:s,actId:a},t.next=4,e.$http(i,r);case 4:return t.abrupt("return",n.a.resolve());case 5:case"end":return t.stop()}},t,e)}))()},goodsDetail:function(s,a){var e=this;this.statisticsData(s,a).then(function(){e.isShare?e.$router.push({name:"GoodsDetail",query:{goodsId:s,isShare:1,shareId:e.shareId}}):e.$router.push({name:"GoodsDetail",query:{goodsId:s}})})},share:function(s){var a={};a.type=s,a.url=Object(b.p)("isShare=1"),a.title="【限时抢购】",a.discriable="【建材采购师】抢购低至一元！！！限时特惠，精选大牌，低价享不停！",a.imgUrl=Object(b.o)(this.banner.banner_path,200,200),a.from=4,Object(C.j)("share",i()(a)),this.$refs.share.hide()},shareUrl:function(){var s=Object(b.p)("isShare=1");Object(C.j)("copyToClipboard",s),this.$refs.share.hide()},getServerTime:function(){var s=this;return new n.a(function(a,e){s.$http("order/getime").then(function(e){e.code===s.$ok&&a(e.data.timestamp)})})}},components:{BaseScroll:f.a,BaseProgressBar:_.a,BasePopupShare:w.a,BaseNavList:p.a},beforeDestroy:function(){clearInterval(this.flashTimeId)}},k={render:function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("div",{staticClass:"flash-sale-container"},[e("base-header",[e("div",{staticClass:"header-nav-container",on:{click:s.showNav}},[e("i",{staticClass:"icon-nav",class:{active:s.showUnreadMessage}})]),s._v(" "),e("div",{staticClass:"header-nav-wrapper"},[e("base-nav-list",{ref:"nav",attrs:{include:["home","message","share"]},on:{showShare:s.showSharePopup}})],1)]),s._v(" "),e("base-scroll",{attrs:{hasMore:s.m_hasMore,pullup:s.m_pullup,pulldown:s.m_pulldown,hasLoading:s.m_loading,hasRefresh:s.m_refresh,data:s.m_dataList},on:{scrollToEnd:s.getData,pulldown:s.pullDownRefresh}},[e("div",{directives:[{name:"show",rawName:"v-show",value:s.waitFlag,expression:"waitFlag"}],staticClass:"flash-sale-banner"},[e("img",{attrs:{src:s.banner.banner_path,alt:""}})]),s._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:s.waitFlag,expression:"waitFlag"}],staticClass:"flash-sale-header"},[e("div",{staticClass:"flash-sale-title"},[e("span",{staticClass:"clock"}),s._v(" "),e("b",{staticClass:"title-description"},[s._v(s._s(s.banner.name))])]),s._v(" "),e("div",{staticClass:"flash-sale-time"},[e("b",{staticClass:"time-description"},[s._v("距结束")]),s._v(" "),e("div",{staticClass:"times"},[e("b",{staticClass:"hours"},[s._v(s._s(s.countTime.hours))]),s._v(" "),e("span",[s._v(":")]),s._v(" "),e("b",{staticClass:"minutes"},[s._v(s._s(s.countTime.minutes))]),s._v(" "),e("span",[s._v(":")]),s._v(" "),e("b",{staticClass:"seconds"},[s._v(s._s(s.countTime.seconds))])])])]),s._v(" "),e("ul",{staticClass:"flash-sale-list"},s._l(s.m_dataList,function(a){return e("li",{key:a.goods_id,on:{click:function(e){s.goodsDetail(a.goods_id,a.flash_sale_id)}}},[e("div",{staticClass:"goods-pic"},[e("img",{attrs:{src:a.image_path,alt:""}}),s._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:"100"===a.stock,expression:"goods.stock === '100'"}],staticClass:"no-goods"})]),s._v(" "),e("div",{staticClass:"flash-sale-detail",staticStyle:{flex:"1"}},[e("h5",{staticClass:"main-title"},[e("span",{directives:[{name:"show",rawName:"v-show",value:a.is_stock_good,expression:"goods.is_stock_good"}]},[s._v("现货")]),s._v("\n           "+s._s(a.title)+"\n          ")]),s._v(" "),e("div",{staticClass:"main-price"},[e("div",{staticClass:"main-price-top"},[e("p",[s._v("抢购价")]),s._v(" "),e("p",{staticClass:"main-price-desc"},[e("b",[s._v("￥")]),e("b",{staticClass:"big-price"},[s._v(s._s(a.priceItem.init))]),e("b",[s._v(".")]),e("b",[s._v(s._s(a.priceItem.zero))])])]),s._v(" "),e("div",{staticClass:"main-price-bottom"},[e("del",[s._v("￥"+s._s(a.max_price))])])]),s._v(" "),e("div",{staticClass:"main-progress"},[e("base-progress-bar",{attrs:{ratio:Number(a.stock)}}),s._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:s.isNone,expression:"isNone"}],staticClass:"sale-out"},[s._v("10件已抢完")]),s._v(" "),e("div",{staticClass:"go-buy",class:{"no-goods":"100"===a.stock}},[e("b",[s._v("马上抢")]),s._v(" "),e("b",{staticClass:"arrow"})])],1)])])}))]),s._v(" "),e("base-popup-share",{ref:"share",attrs:{isFlashSale:!0},on:{share:s.share,shareUrl:s.shareUrl}})],1)},staticRenderFns:[]};var x=e("VU/8")(I,k,!1,function(s){e("nfCs")},null,null);a.default=x.exports},f8hi:function(s,a){},nfCs:function(s,a){}});