webpackJsonp([10],{"2jhQ":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("/kga"),o=s("63CM"),a=s("2sLL"),n=s("dQvZ"),r=s("aPNe"),h=s.n(r),l=s("DHfu"),d=(o.a,i.a,a.a,n.a,{data:function(){return{authShow:!1,isPrivilege:!1,phoneNumber:"",messageCode:"",identity:h.a,roleName:"",getCodeText:"获取验证码",timer:null,isDisable:!1,oneDiscount:"",buyerId:"",shopTitle:"",authenDescription:"",isAuthendByCode:!1,isBeforeScroll:!0}},computed:{isFromApp:function(){return"app"===this.$route.query.from},shopId:function(){return this.$route.query.shopId}},created:function(){this.getOneDiscount(),this.judgeIdentityFromApp(),Object(l.p)()},methods:{beforeScroll:function(){if(this.isBeforeScroll){var e=this.$refs.bottom;e.style.height=e.offsetHeight+1+"px",this.isBeforeScroll=!1}},goHoneyShop:function(){this.isFromApp?this.$router.push("/my-honey?fromNative=1"):this.authShow=!this.authShow},judgeIdentityFromApp:function(){var e=this,t=this.isFromApp,s=this.shopId;if(t){var i={seller_id:s};this.$http("adv/buyerShopAuthAppCode",i).then(function(t){t.code===e.$ok&&(t.data.is_verified&&(e.isAuthendByCode=!0),Object(l.j)("setIdentityAuth",2))})}},showAuthDialog:function(){var e=this.isFromApp,t=this.shopId;e?this.$router.push({path:"/shop-detail",query:{id:t,goHome:1}}):this.authShow=!this.authShow},showAuthDialog2:function(){this.authShow=!this.authShow,this.isPrivilege=!1},getCode:function(){var e=this;if(this.phoneNumber)if(/^1[3-9][0-9]{9}$/.test(this.phoneNumber)){var t=this.phoneNumber,s=this.shopId,i=this.buyerId,o={mobile:t,type:"register"};this.$http("sendPhoneMessage",o).then(function(o){if(o.code!==e.$ok)e.$t(o.error);else{var a=59;e.isDisable=!0,e.getCodeText=a+"s",e.timer&&(clearInterval(e.timer),e.timer=null),e.timer=setInterval(function(){a--,e.getCodeText=a+"s",0===a&&(e.getCodeText="获取验证码",e.isDisable=!1,clearInterval(e.timer),e.timer=null)},1e3);var n={mobile:t,source:4};e.$http("isRegister",n).then(function(t){if(e.isPrivilege=2===t.data.status,e.buyerId=t.data.buyer_id,!e.isPrivilege){var o={seller_id:s,buyer_id:i};e.$http("adv/buyerShopAuthCode",o)}})}})}else this.$t("手机号格式不正确");else this.$t("请输入手机号")},getOneDiscount:function(){var e=this,t={seller_id:this.shopId,status:1};this.$http("remaidRatio",t).then(function(t){if(t.code===e.$ok){var s=t.data,i=s.one_discount,o=s.shopName,a=s.explain;e.oneDiscount=parseFloat(i).toFixed(1),e.shopTitle=o,e.authenDescription=a||"限时抢购，爆款活动商品不参与此优惠，此优惠仅限本店铺使用，认证申请审核通过后可享受此特权优惠。最终解释权归商户所有"}})},showRoles:function(){this.$refs.popup.show()},hideRoles:function(){this.$refs.popup.hide()},goAuthen:function(){var e=this,t=this.roleName,s=this.buyerId,i=this.phoneNumber,o=this.messageCode,a=this.shopId;if(o)if(t){var n={title:t,user_id:s,mobile:i,verify:o};this.$http("addIdentityCode",n).then(function(t){if(t.code!==e.$ok)e.$t(t.message);else{var i={seller_id:a,buyer_id:s};e.$http("adv/buyerShopAuthCode",i).then(function(t){t.code!==e.$ok?e.$t(t.message):e.openCgs()})}})}else this.$t("请选择身份");else this.$t("请输入验证码")},openCgs:function(){var e=this,t={mobile:this.phoneNumber,verify:this.messageCode};this.$http("verifyOrNo",t).then(function(t){t.code!==e.$ok?e.$t(t.message):e.$router.replace("/app")})}},directives:{TransferDom:o.a},components:{XDialog:i.a,XButton:a.a,BasePopupTransition:n.a}}),u={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"scan-code-container"},[i("div",{staticClass:"scan-code-wrapper"},[i("div",{staticClass:"authened-top"},[i("p",{on:{click:e.goHoneyShop}},[e._v("蜂蜜商城>>")]),e._v(" "),i("h1",{class:{active:e.isAuthendByCode}},[e._v("恭喜！")]),e._v(" "),i("h2",{directives:[{name:"show",rawName:"v-show",value:e.isAuthendByCode,expression:"isAuthendByCode"}]},[e._v("您已认证过该店铺特约采购师")]),e._v(" "),i("h2",{directives:[{name:"show",rawName:"v-show",value:!e.isAuthendByCode,expression:"!isAuthendByCode"}]},[e._v("您已成为该店铺特约采购师")]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.isAuthendByCode,expression:"!isAuthendByCode"}],staticClass:"gived-honey"},[i("i"),e._v(" "),i("b",[e._v("+5")]),e._v(" "),i("span",[e._v("蜂蜜")])])]),e._v(" "),i("div",{staticClass:"authened-center"},[i("div",{staticClass:"authend-button",on:{click:e.showAuthDialog}}),e._v(" "),i("p",[e._v("店铺认证专享优惠，额外赚佣金")])]),e._v(" "),i("base-scroll",{attrs:{"has-more":!0,"before-scroll":!0},on:{beforeScroll:e.beforeScroll}},[i("div",{ref:"bottom",staticClass:"authened-bottom"},[i("h1",[i("span",[e._v(e._s(e.shopTitle))]),e._v("-专享特约认证\n        ")]),e._v(" "),i("div",{staticClass:"authend-commission"},[i("div",{staticClass:"commisson-left"}),e._v(" "),i("div",{staticClass:"commisson-center"}),e._v(" "),e.isFromApp?i("div",{staticClass:"commisson-right"},[i("h2",[e._v("专属特权再返佣"+e._s(e.oneDiscount)+"%")]),e._v(" "),i("p",[e._v("认证店铺后在原佣金基础上再累加返佣"+e._s(e.oneDiscount)+"%")])]):i("div",{staticClass:"commisson-right"},[i("h2",[e._v("专属特权再返佣**%")]),e._v(" "),i("p",[e._v("认证店铺后在原佣金基础上再累加返佣**%")])])]),e._v(" "),i("div",{staticClass:"seperate"}),e._v(" "),i("div",{staticClass:"authend-tips"},[i("span",[e._v("说明：")]),e._v(" "),i("p",[e._v(e._s(e.authenDescription))])])])])],1),e._v(" "),i("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[i("x-dialog",{staticClass:"auth-box-dialog",attrs:{"hide-on-blur":""},model:{value:e.authShow,callback:function(t){e.authShow=t},expression:"authShow"}},[i("div",{staticClass:"auth-ident-box"},[i("div",{staticClass:"logo"},[i("img",{attrs:{src:s("z61+"),alt:""}})]),e._v(" "),i("p",{staticClass:"auth-title"},[e._v("验证身份使用特权")]),e._v(" "),i("div",{staticClass:"form-box"},[i("div",{staticClass:"form-item"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.phoneNumber,expression:"phoneNumber"}],staticClass:"phone-number",attrs:{type:"text",placeholder:"请输入手机号"},domProps:{value:e.phoneNumber},on:{input:function(t){t.target.composing||(e.phoneNumber=t.target.value)}}}),e._v(" "),i("x-button",{staticClass:"btn-get-code",attrs:{text:e.getCodeText,disabled:e.isDisable,type:"primary",mini:""},nativeOn:{click:function(t){return e.getCode(t)}}})],1),e._v(" "),i("div",{staticClass:"form-item"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.messageCode,expression:"messageCode"}],staticClass:"short-message-code",attrs:{type:"text",placeholder:"请输入短信验证码"},domProps:{value:e.messageCode},on:{input:function(t){t.target.composing||(e.messageCode=t.target.value)}}})]),e._v(" "),e.isPrivilege?i("div",{staticClass:"form-item"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.roleName,expression:"roleName"}],staticClass:"phone-number",attrs:{type:"text",placeholder:"您的身份"},domProps:{value:e.roleName},on:{input:function(t){t.target.composing||(e.roleName=t.target.value)}}}),e._v(" "),i("x-button",{staticClass:"select-identify",attrs:{text:"选择您的身份",type:"primary",mini:""},nativeOn:{click:function(t){return e.showRoles(t)}}})],1):e._e(),e._v(" "),i("div",{staticClass:"form-btn-open"},[i("x-button",{staticClass:"open-cgs-app",attrs:{text:"开启建材采购师",id:"btnOpenApp"},nativeOn:{click:function(t){return e.goAuthen(t)}}}),e._v(" "),i("p",{staticClass:"register-tips"},[e._v("未注册的手机将自动创建建材采购师账户")])],1)])])])],1),e._v(" "),i("base-popup-transition",{ref:"popup"},[i("div",{staticClass:"register-content"},[i("h1",{staticClass:"title"},[e._v("\n        请选择您的身份\n        "),i("span",{on:{click:e.hideRoles}})]),e._v(" "),i("div",{staticClass:"form"},e._l(e.identity,function(t){return i("div",{key:t.id,staticClass:"form-group"},[i("label",{attrs:{for:t.id}},[i("span",{class:{active:t.name===e.roleName}}),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.roleName,expression:"roleName"}],attrs:{type:"radio",id:t.id},domProps:{value:t.name,checked:e._q(e.roleName,t.name)},on:{change:function(s){e.roleName=t.name}}}),e._v(e._s(t.name)+"\n          ")]),e._v(" "),i("h2",[e._v(e._s(t.title))])])})),e._v(" "),i("div",{staticClass:"register-submit",on:{click:e.hideRoles}},[e._v("确定")])])])],1)},staticRenderFns:[]};var c=s("VU/8")(d,u,!1,function(e){s("9VvP")},null,null);t.default=c.exports},"9VvP":function(e,t){}});