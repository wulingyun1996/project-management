webpackJsonp([8,293,294],{"31TH":function(t,e){},QnNU:function(t,e,i){t.exports=i.p+"static/img/img-identity-guide.8f1e648.png"},"Sx/y":function(t,e,i){t.exports=i.p+"static/img/img-next-step.015ce70.png"},h0Qp:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("mvHQ"),s=i.n(n),d=i("Dd8w"),o=i.n(d),a=i("r0TW"),u=i("DHfu"),c=i("X2Oc"),r=i("NYxO"),l=i("rLAy"),h=i("clSP"),y=(o()({},Object(r.e)(["authenRole"]),{isSelectedIdentity:function(){return!!this.seletedIdentity.length},isAuthendRole:function(){return 1===this.roleInfo.is_old&&2===this.roleInfo.audit_status},isFromAuditingPage:function(){return!!this.$route.query.flag}}),o()({},Object(r.d)(["SET_AUTHEN_ROLE"]),{queryIdentityRole:function(){var t=this;this.$http("isOldBuyer").then(function(e){if(e.code===t.$ok){var i=e.data,n=i.audit_status,s=i.is_old;if(2!==n||0!==s&&2!==s||(t.ispassedAuthend=!0,2===s&&Object(u.k)("setIsOld",2)),3===n&&!t.isFromAuditingPage)return void t.$router.push("/auditing");t.roleInfo=e.data}})},authenOldIdentity:function(){var t=this,e={title:this.seletedIdentity.join()};this.$http("oldBuyerIdentity",e).then(function(e){if(e.code===t.$ok)return t.ispassedAuthend=!0,Object(u.k)("navigationItem",s()({})),void Object(u.k)("setIsOld",2);t.$t(e.message)})},goAuthen:function(){if(this.isAuthendRole)this.authenOldIdentity();else{var t=this.identityList,e=this.seletedIdentity,i={seletedIdentityList:this.identityToList(e,t),identityList:t,seletedIdentity:e};this.SET_AUTHEN_ROLE(i),this.$push("/authen-type")}},identityToList:function(t,e){var i=[];return t.forEach(function(t){e.some(function(e){if(t===e.name)return i.push(e),!0})}),i},goExplainIdentity:function(){this.$router.push({name:"ExplainIdentity"})},selectCurrentIdentity:function(t,e){var i=t.name,n=t.selected,s=Object(c.j)(i,this.seletedIdentity),d=s.include,o=s.index;if(d)this.seletedIdentity.splice(o,1);else{if(3===this.seletedIdentity.length)return void(this.showTips=!0);this.seletedIdentity.push(i)}t.selected=!n,this.identityList.splice(e,1,t)},getSavedIdentity:function(){var t=this;Object(u.j)("nativeReturnData","returnIOSSavedContent").then(function(e){if(e){var i=Object(c.o)(e);if(Object(c.n)(i)){var n=i.identityList,s=i.seletedIdentity;t.identityList=n,t.seletedIdentity=s}}}).catch(function(){}).finally(function(){if(t.authenRole){var e=Object(c.b)(t.authenRole),i=e.identityList,n=e.seletedIdentity;t.identityList=i,t.seletedIdentity=n}})},goHome:function(){this.isAuthendRole||Object(u.k)("setIdentityAuth",2),Object(u.u)()}}),a.a,l.a,{message:"您还未完成认证，确定要放弃吗？",left:"放弃",right:"继续认证"}),f={name:"IdentityGuide",data:function(){return{identityList:Object(c.b)(h.default),roleInfo:{},seletedIdentity:[],ispassedAuthend:!1,showTips:!1}},computed:o()({},Object(r.e)(["authenRole"]),{isSelectedIdentity:function(){return!!this.seletedIdentity.length},isAuthendRole:function(){return 1===this.roleInfo.is_old&&2===this.roleInfo.audit_status},isFromAuditingPage:function(){return!!this.$route.query.flag}}),created:function(){this.getSavedIdentity(),Object(u.r)(y,0),this.queryIdentityRole()},methods:o()({},Object(r.d)(["SET_AUTHEN_ROLE"]),{queryIdentityRole:function(){var t=this;this.$http("isOldBuyer").then(function(e){if(e.code===t.$ok){var i=e.data,n=i.audit_status,s=i.is_old;if(2!==n||0!==s&&2!==s||(t.ispassedAuthend=!0,2===s&&Object(u.k)("setIsOld",2)),3===n&&!t.isFromAuditingPage)return void t.$router.push("/auditing");t.roleInfo=e.data}})},authenOldIdentity:function(){var t=this,e={title:this.seletedIdentity.join()};this.$http("oldBuyerIdentity",e).then(function(e){if(e.code===t.$ok)return t.ispassedAuthend=!0,Object(u.k)("navigationItem",s()({})),void Object(u.k)("setIsOld",2);t.$t(e.message)})},goAuthen:function(){if(this.isAuthendRole)this.authenOldIdentity();else{var t=this.identityList,e=this.seletedIdentity,i={seletedIdentityList:this.identityToList(e,t),identityList:t,seletedIdentity:e};this.SET_AUTHEN_ROLE(i),this.$push("/authen-type")}},identityToList:function(t,e){var i=[];return t.forEach(function(t){e.some(function(e){if(t===e.name)return i.push(e),!0})}),i},goExplainIdentity:function(){this.$router.push({name:"ExplainIdentity"})},selectCurrentIdentity:function(t,e){var i=t.name,n=t.selected,s=Object(c.j)(i,this.seletedIdentity),d=s.include,o=s.index;if(d)this.seletedIdentity.splice(o,1);else{if(3===this.seletedIdentity.length)return void(this.showTips=!0);this.seletedIdentity.push(i)}t.selected=!n,this.identityList.splice(e,1,t)},getSavedIdentity:function(){var t=this;Object(u.j)("nativeReturnData","returnIOSSavedContent").then(function(e){if(e){var i=Object(c.o)(e);if(Object(c.n)(i)){var n=i.identityList,s=i.seletedIdentity;t.identityList=n,t.seletedIdentity=s}}}).catch(function(){}).finally(function(){if(t.authenRole){var e=Object(c.b)(t.authenRole),i=e.identityList,n=e.seletedIdentity;t.identityList=i,t.seletedIdentity=n}})},goHome:function(){this.isAuthendRole||Object(u.k)("setIdentityAuth",2),Object(u.u)()}}),watch:{$route:function(t,e){"IdentitySelect"===t.name&&Object(u.r)(y,0)}},beforeRouteLeave:function(t,e,i){var n={identityList:this.identityList,seletedIdentity:this.seletedIdentity};Object(u.k)("nativeSaveData",Object(c.w)(n)),i()},components:{BasePopupPass:a.a,Toast:l.a}},v={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"identity-container"},[n("div",{staticClass:"identity-select-explain",on:{click:t.goExplainIdentity}},[n("i"),t._v(" "),n("span",[t._v("不清楚您的身份，没关系！看看身份说明")])]),t._v(" "),t._m(0),t._v(" "),n("div",{staticClass:"identity-type-wrapper"},t._l(3,function(e){return n("div",{key:e,staticClass:"identity-type-list"},t._l(t.identityList,function(i,s){return i.type===e?n("div",{key:i.id,staticClass:"identity-type-item",on:{click:function(e){t.selectCurrentIdentity(i,s)}}},[n("img",{attrs:{src:i.selected?i.activatedImg:i.defaultImg,alt:""}})]):t._e()}))})),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isSelectedIdentity,expression:"isSelectedIdentity"}],staticClass:"identity-button",on:{click:t.goAuthen}},[n("img",{attrs:{src:i("Sx/y"),alt:""}})]),t._v(" "),n("base-popup-pass",{directives:[{name:"show",rawName:"v-show",value:t.ispassedAuthend,expression:"ispassedAuthend"}],on:{comfirm:t.goHome}}),t._v(" "),n("toast",{attrs:{type:"text",position:"middle",time:2e3},model:{value:t.showTips,callback:function(e){t.showTips=e},expression:"showTips"}},[t._v("最多可选择3个")]),t._v(" "),n("router-view")],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"identity-select-guide"},[e("img",{attrs:{src:i("QnNU"),alt:""}}),this._v(" "),e("h3",[this._v("请根据您的从业内容合理选择您的身份")]),this._v(" "),e("h4",[this._v("最多可选择3个")])])}]};var I=i("VU/8")(f,v,!1,function(t){i("31TH")},"data-v-7eac9fa7",null);e.default=I.exports}});